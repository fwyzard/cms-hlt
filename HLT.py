JavaCode based migration for real PR 3211
